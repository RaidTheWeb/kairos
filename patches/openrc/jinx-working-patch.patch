diff '--color=auto' -urN --no-dereference openrc-0.63-clean/meson.build openrc-0.63-workdir/meson.build
--- openrc-0.63-clean/meson.build	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/meson.build	2025-12-29 16:35:12.697082004 +1300
@@ -39,6 +39,8 @@
 
 if os == 'linux'
   cap_dep = dependency('libcap', version: '>=2.33')
+elif os == 'nomos'
+  kvm_dep = []
 elif os.contains('bsd') or os == 'dragonfly'
   kvm_dep = cc.find_library('kvm')
 endif
@@ -95,7 +97,7 @@
   c_flags += '-DRC_DEBUG'
 endif
 
-if os == 'linux'
+if os == 'linux' or os == 'nomos'
   c_flags += '-D_DEFAULT_SOURCE'
 elif os == 'freebsd'
   c_flags += '-D_BSD_SOURCE'
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/fstabinfo/fstabinfo.c openrc-0.63-workdir/src/fstabinfo/fstabinfo.c
--- openrc-0.63-clean/src/fstabinfo/fstabinfo.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/fstabinfo/fstabinfo.c	2025-12-29 16:52:02.478413131 +1300
@@ -28,7 +28,7 @@
 /* Yay for linux and its non liking of POSIX functions.
    Okay, we could use getfsent but the man page says use getmntent instead
    AND we don't have getfsent on uclibc or dietlibc for some odd reason. */
-#ifdef __linux__
+#if defined(__linux__) || defined(__nomos__)
 #  define HAVE_GETMNTENT
 #  include <mntent.h>
 
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/libeinfo/libeinfo.c openrc-0.63-workdir/src/libeinfo/libeinfo.c
--- openrc-0.63-clean/src/libeinfo/libeinfo.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/libeinfo/libeinfo.c	2025-12-29 16:51:17.045706391 +1300
@@ -31,6 +31,9 @@
 #include "einfo.h"
 #include "helpers.h"
 
+#include <termios.h>
+#include <asm/ioctls.h>
+
 /* In case we cannot work out how many columns from ioctl, supply a default */
 #define DEFAULT_COLS		 80
 
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/librc/librc-daemon.c openrc-0.63-workdir/src/librc/librc-daemon.c
--- openrc-0.63-clean/src/librc/librc-daemon.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/librc/librc-daemon.c	2025-12-29 16:36:05.931394986 +1300
@@ -32,7 +32,7 @@
 #include "helpers.h"
 
 #if defined(__linux__) || (defined (__FreeBSD_kernel__) && defined(__GLIBC__)) \
-	|| defined(__GNU__)
+	|| defined(__GNU__) || defined(__nomos__)
 static bool
 pid_is_exec(pid_t pid, const char *exec)
 {
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/mountinfo/mountinfo.c openrc-0.63-workdir/src/mountinfo/mountinfo.c
--- openrc-0.63-clean/src/mountinfo/mountinfo.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/mountinfo/mountinfo.c	2025-12-29 16:37:05.779496565 +1300
@@ -31,7 +31,7 @@
 #  define statfs statvfs
 #  define F_FLAGS f_flag
 #elif defined(__linux__) || (defined(__FreeBSD_kernel__) && \
-	defined(__GLIBC__)) || defined(__GNU__)
+	defined(__GLIBC__)) || defined(__GNU__) || defined(__nomos__)
 #  include <mntent.h>
 #endif
 
@@ -292,7 +292,7 @@
 }
 
 #elif defined(__linux__) || (defined(__FreeBSD_kernel__) && \
-	defined(__GLIBC__)) || defined(__GNU__)
+	defined(__GLIBC__)) || defined(__GNU__) || defined(__nomos__)
 static struct mntent *
 getmntfile(const char *file)
 {
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/openrc/rc-logger.c openrc-0.63-workdir/src/openrc/rc-logger.c
--- openrc-0.63-clean/src/openrc/rc-logger.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/openrc/rc-logger.c	2025-12-29 16:37:20.613049288 +1300
@@ -32,7 +32,7 @@
 #include <unistd.h>
 
 #if defined(__linux__) || (defined(__FreeBSD_kernel__) && defined(__GLIBC__)) \
-	|| defined(__GNU__)
+	|| defined(__GNU__) || defined(__nomos__)
 #  include <pty.h>
 #elif defined(__NetBSD__) || defined(__OpenBSD__)
 #  include <util.h>
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/openrc-init/meson.build openrc-0.63-workdir/src/openrc-init/meson.build
--- openrc-0.63-clean/src/openrc-init/meson.build	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/openrc-init/meson.build	2025-12-29 16:37:45.495124423 +1300
@@ -1,4 +1,4 @@
-if os == 'linux'
+if os == 'linux' or os == 'nomos'
   executable('openrc-init', 'openrc-init.c',
     include_directories: incdir,
     dependencies: [rc, einfo, shared, dl_dep, selinux_dep],
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/openrc-init/openrc-init.c openrc-0.63-workdir/src/openrc-init/openrc-init.c
--- openrc-0.63-clean/src/openrc-init/openrc-init.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/openrc-init/openrc-init.c	2025-12-29 16:38:25.778760982 +1300
@@ -33,7 +33,7 @@
 #include <sys/types.h>
 #include <sys/wait.h>
 #include <poll.h>
-#include <utmp.h>
+#include <utmpx.h>
 
 #ifdef HAVE_SELINUX
 #  include <selinux/selinux.h>
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/openrc-run/openrc-run.c openrc-0.63-workdir/src/openrc-run/openrc-run.c
--- openrc-0.63-clean/src/openrc-run/openrc-run.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/openrc-run/openrc-run.c	2025-12-29 16:38:41.318509054 +1300
@@ -38,7 +38,7 @@
 #include <inttypes.h>
 
 #if defined(__linux__) || (defined(__FreeBSD_kernel__) && defined(__GLIBC__)) \
-	|| defined(__GNU__)
+	|| defined(__GNU__) || defined(__nomos__)
 #  include <pty.h>
 #elif defined(__NetBSD__) || defined(__OpenBSD__)
 #  include <util.h>
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/openrc-shutdown/meson.build openrc-0.63-workdir/src/openrc-shutdown/meson.build
--- openrc-0.63-clean/src/openrc-shutdown/meson.build	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/openrc-shutdown/meson.build	2025-12-29 16:38:57.795266716 +1300
@@ -1,4 +1,4 @@
-if os == 'linux'
+if os == 'linux' or os == 'nomos'
   executable('openrc-shutdown',
     ['openrc-shutdown.c', 'broadcast.c', 'sysvinit.c'],
     include_directories: incdir,
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/shared/meson.build openrc-0.63-workdir/src/shared/meson.build
--- openrc-0.63-clean/src/shared/meson.build	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/shared/meson.build	2025-12-29 16:39:39.744929123 +1300
@@ -11,7 +11,7 @@
   version_h,
 ]
 
-if os == 'linux'
+if os == 'linux' or os == 'nomos'
   shared_sources += 'wtmp.c'
 endif
 
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/shared/wtmp.c openrc-0.63-workdir/src/shared/wtmp.c
--- openrc-0.63-clean/src/shared/wtmp.c	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/shared/wtmp.c	2025-12-29 16:40:40.628881425 +1300
@@ -20,7 +20,7 @@
 #include <sys/time.h>
 #include <sys/types.h>
 #include <sys/utsname.h>
-#include <utmp.h>
+#include <utmpx.h>
 
 #include "wtmp.h"
 
@@ -28,7 +28,7 @@
 		const char *line)
 {
 	struct timeval tv;
-	struct utmp utmp;
+	struct utmpx utmp;
 	struct utsname uname_buf;
 
 	memset(&utmp, 0, sizeof(utmp));
@@ -37,7 +37,6 @@
 	utmp.ut_tv.tv_usec = tv.tv_usec;
 	utmp.ut_pid  = pid;
 	utmp.ut_type = type;
-	strncpy(utmp.ut_name, user, sizeof(utmp.ut_name));
 	strncpy(utmp.ut_id  , id  , sizeof(utmp.ut_id  ));
 	strncpy(utmp.ut_line, line, sizeof(utmp.ut_line));
 
@@ -45,5 +44,7 @@
 	if (uname(&uname_buf) == 0)
 		strncpy(utmp.ut_host, uname_buf.release, sizeof(utmp.ut_host));
 
-	updwtmp(WTMP_FILE, &utmp);
+	#ifndef __nomos__
+		updwtmpx(WTMP_FILE, &utmp);
+	#endif
 }
diff '--color=auto' -urN --no-dereference openrc-0.63-clean/src/shared/wtmp.h openrc-0.63-workdir/src/shared/wtmp.h
--- openrc-0.63-clean/src/shared/wtmp.h	2025-09-20 13:47:26.000000000 +1200
+++ openrc-0.63-workdir/src/shared/wtmp.h	2025-12-29 16:41:22.547210167 +1300
@@ -18,7 +18,7 @@
 #ifndef __RC_WTMP_H__
 #define __RC_WTMP_H__
 
-#include <utmp.h>
+#include <utmpx.h>
 #include <sys/types.h>
 
 void log_wtmp(const char *user, const char *id, pid_t pid, int type,
